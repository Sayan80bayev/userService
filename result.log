?   	userService/cmd/server	[no test files]
?   	userService/docs	[no test files]
?   	userService/internal/bootstrap	[no test files]
?   	userService/internal/config	[no test files]
?   	userService/internal/delivery	[no test files]
?   	userService/internal/events	[no test files]
?   	userService/internal/grpc	[no test files]
?   	userService/internal/mappers	[no test files]
?   	userService/internal/model	[no test files]
?   	userService/internal/repository	[no test files]
?   	userService/internal/routes	[no test files]
=== RUN   TestUserService_UpdateUser
=== RUN   TestUserService_UpdateUser/successful_update_with_cache_invalidation
=== RUN   TestUserService_UpdateUser/error_uploading_file
--- PASS: TestUserService_UpdateUser (0.00s)
    --- PASS: TestUserService_UpdateUser/successful_update_with_cache_invalidation (0.00s)
    --- PASS: TestUserService_UpdateUser/error_uploading_file (0.00s)
=== RUN   TestUserService_DeleteUserById
--- PASS: TestUserService_DeleteUserById (0.00s)
=== RUN   TestUserService_GetUserById
[33mWARNING[0m cache get failed for user 139a88a8-27ed-4208-bcd9-8026def8cf29: cache miss 2025-09-23 20:53:36
--- PASS: TestUserService_GetUserById (0.00s)
=== RUN   TestUserService_GetAllUsers
--- PASS: TestUserService_GetAllUsers (0.00s)
PASS
ok  	userService/internal/service	0.786s
?   	userService/internal/transfer/request	[no test files]
?   	userService/internal/transfer/response	[no test files]
?   	userService/proto	[no test files]
2025/09/23 20:53:37 github.com/testcontainers/testcontainers-go - Connected to docker: 
  Server Version: 28.3.0
  API Version: 1.50
  Operating System: Docker Desktop
  Total Memory: 3919 MB
  Labels:
    com.docker.desktop.address=unix:///Users/sayanseksenbaev/Library/Containers/com.docker.docker/Data/docker-cli.sock
  Testcontainers for Go Version: v0.38.0
  Resolved Docker Host: unix:///var/run/docker.sock
  Resolved Docker Socket Path: /var/run/docker.sock
  Test SessionID: cd5c8c90816443afb4b58f6b5467d6df777fb708e7181762124a7a17ab490539
  Test ProcessID: fb9a2d67-8043-4cb8-bab3-a8f98ecaea33
2025/09/23 20:53:37 üê≥ Creating container for image testcontainers/ryuk:0.12.0
2025/09/23 20:53:37 ‚úÖ Container created: 99ed8eca8d3f
2025/09/23 20:53:37 üê≥ Starting container: 99ed8eca8d3f
2025/09/23 20:53:37 ‚úÖ Container started: 99ed8eca8d3f
2025/09/23 20:53:37 ‚è≥ Waiting for container id 99ed8eca8d3f image: testcontainers/ryuk:0.12.0. Waiting for: &{Port:8080/tcp timeout:<nil> PollInterval:100ms skipInternalCheck:false skipExternalCheck:false}
2025/09/23 20:53:37 üîî Container is ready: 99ed8eca8d3f
2025/09/23 20:53:37 üê≥ Creating container for image mongo:6.0
2025/09/23 20:53:37 ‚úÖ Container created: e1fc5559336a
2025/09/23 20:53:37 üê≥ Starting container: e1fc5559336a
2025/09/23 20:53:37 ‚úÖ Container started: e1fc5559336a
2025/09/23 20:53:37 ‚è≥ Waiting for container id e1fc5559336a image: mongo:6.0. Waiting for: &{Port:27017/tcp timeout:<nil> PollInterval:100ms skipInternalCheck:false skipExternalCheck:false}
2025/09/23 20:53:38 üîî Container is ready: e1fc5559336a
2025/09/23 20:53:38 üê≥ Creating container for image redis:7.0
2025/09/23 20:53:38 ‚úÖ Container created: 9e49b6a38bd7
2025/09/23 20:53:38 üê≥ Starting container: 9e49b6a38bd7
2025/09/23 20:53:38 ‚úÖ Container started: 9e49b6a38bd7
2025/09/23 20:53:38 ‚è≥ Waiting for container id 9e49b6a38bd7 image: redis:7.0. Waiting for: &{Port:6379/tcp timeout:<nil> PollInterval:100ms skipInternalCheck:false skipExternalCheck:false}
2025/09/23 20:53:38 üîî Container is ready: 9e49b6a38bd7
2025/09/23 20:53:38 üê≥ Creating container for image minio/minio:RELEASE.2025-04-22T22-12-26Z
2025/09/23 20:53:38 ‚úÖ Container created: f80ebb332892
2025/09/23 20:53:38 üê≥ Starting container: f80ebb332892
2025/09/23 20:53:39 ‚úÖ Container started: f80ebb332892
2025/09/23 20:53:39 ‚è≥ Waiting for container id f80ebb332892 image: minio/minio:RELEASE.2025-04-22T22-12-26Z. Waiting for: &{timeout:<nil> Log:API: http:// IsRegexp:false Occurrence:1 PollInterval:100ms check:<nil> submatchCallback:<nil> re:<nil> log:[]}
2025/09/23 20:53:39 üîî Container is ready: f80ebb332892
2025/09/23 20:53:39 üê≥ Creating container for image bitnami/kafka:3.6.1
2025/09/23 20:53:39 ‚úÖ Container created: 666c43247634
2025/09/23 20:53:39 üê≥ Starting container: 666c43247634
2025/09/23 20:53:39 ‚úÖ Container started: 666c43247634
2025/09/23 20:53:39 ‚è≥ Waiting for container id 666c43247634 image: bitnami/kafka:3.6.1. Waiting for: &{Port:9092/tcp timeout:0x140004eb1a0 PollInterval:100ms skipInternalCheck:false skipExternalCheck:false}
2025/09/23 20:53:43 üîî Container is ready: 666c43247634
[32mINFO[0m Connected to MongoDB 2025-09-23 20:53:45
[32mINFO[0m ‚úÖ Connected to Redis at localhost:58958 (DB=0) 2025-09-23 20:53:45
[32mINFO[0m Redis connected 2025-09-23 20:53:45
[32mINFO[0m ‚úÖ Successfully connected to MinIO 2025-09-23 20:53:45
[32mINFO[0m Minio connected: bucket=test-bucket host=localhost 2025-09-23 20:53:45
%3|1758642825.148|FAIL|rdkafka#producer-1| [thrd:localhost:9092/bootstrap]: localhost:9092/bootstrap: Connect to ipv6#[::1]:9092 failed: Connection refused (after 0ms in state CONNECT)
[32mINFO[0m Kafka producer initialized for topic: user-events 2025-09-23 20:53:45
[32mINFO[0m Kafka consumer initialized 2025-09-23 20:53:45
=== RUN   TestUserLifecycle
Waiting briefly for consumer to pick up event
--- FAIL: TestUserLifecycle (5.00s)
panic: runtime error: invalid memory address or nil pointer dereference [recovered]
	panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x2 addr=0x0 pc=0x10545b920]

goroutine 367 [running]:
testing.tRunner.func1.2({0x105b9b780, 0x106293390})
	/Users/sayanseksenbaev/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.6.darwin-arm64/src/testing/testing.go:1734 +0x1ac
testing.tRunner.func1()
	/Users/sayanseksenbaev/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.6.darwin-arm64/src/testing/testing.go:1737 +0x334
panic({0x105b9b780?, 0x106293390?})
	/Users/sayanseksenbaev/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.6.darwin-arm64/src/runtime/panic.go:792 +0x124
userService/internal/service.(*UserService).GetUserById(0x0, {0x105cf3508, 0x1062fbd40}, {0x4e, 0x6e, 0xcd, 0xa1, 0xed, 0x93, 0x48, ...})
	/Users/sayanseksenbaev/Programming/go-project/services/userService/internal/service/user_service.go:138 +0xc0
userService/internal/delivery.(*UserHandler).GetUserById(0x1400013c020, 0x1400012c000)
	/Users/sayanseksenbaev/Programming/go-project/services/userService/internal/delivery/user_handler.go:193 +0x2a8
github.com/gin-gonic/gin.(*Context).Next(...)
	/Users/sayanseksenbaev/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185
github.com/gin-gonic/gin.(*Engine).handleHTTPRequest(0x1400028a9c0, 0x1400012c000)
	/Users/sayanseksenbaev/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633 +0x6c4
github.com/gin-gonic/gin.(*Engine).ServeHTTP(0x1400028a9c0, {0x105cf18f8, 0x1400043a000}, 0x140002d6140)
	/Users/sayanseksenbaev/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589 +0x170
userService/tests/integration.doRequest(0x105874ec7?, {0x1058618c7?, 0x140003c3e08?}, {0x14000452040?, 0x1?}, {0x0?, 0x0?}, 0x0)
	/Users/sayanseksenbaev/Programming/go-project/services/userService/tests/integration/user_lifecycle_test.go:28 +0x1f8
userService/tests/integration.TestUserLifecycle(0x14000582fc0)
	/Users/sayanseksenbaev/Programming/go-project/services/userService/tests/integration/user_lifecycle_test.go:56 +0x2a0
testing.tRunner(0x14000582fc0, 0x105ce3e00)
	/Users/sayanseksenbaev/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.6.darwin-arm64/src/testing/testing.go:1792 +0xe4
created by testing.(*T).Run in goroutine 1
	/Users/sayanseksenbaev/go/pkg/mod/golang.org/toolchain@v0.0.1-go1.24.6.darwin-arm64/src/testing/testing.go:1851 +0x374
FAIL	userService/tests/integration	13.987s
?   	userService/tests/testutil	[no test files]
FAIL
